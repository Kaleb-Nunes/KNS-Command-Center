<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNS Command Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=JetBrains+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #0b0b0b; --sidebar: #111; --text: #fff; --neon: #00ff88; --border: rgba(255,255,255,0.1); }
        * { margin:0; padding:0; box-sizing:border-box; outline:none; }
        body { background:var(--bg); color:var(--text); font-family:'Plus Jakarta Sans'; display:flex; height:100vh; overflow:hidden; }
        .hidden { display:none !important; }
        .mono { font-family: 'JetBrains Mono'; }
        
        /* Layout */
        .sidebar { width:260px; background:var(--sidebar); border-right:1px solid var(--border); padding:30px 20px; display:flex; flex-direction:column; }
        .logo { font-family:'Orbitron'; color:var(--neon); font-size:1.2rem; margin-bottom:40px; padding-bottom:20px; border-bottom:1px solid var(--border); }
        .btn-menu { width:100%; padding:15px; background:transparent; border:none; color:#888; text-align:left; cursor:pointer; display:flex; gap:10px; border-radius:6px; font-family:'JetBrains Mono'; transition:0.2s; }
        .btn-menu:hover, .btn-menu.active { background:rgba(0,255,136,0.1); color:var(--neon); border-left:3px solid var(--neon); }
        
        .main { flex:1; padding:40px; overflow-y:auto; }
        .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:40px; border-bottom:1px solid var(--border); padding-bottom:20px; }
        .profile { display:flex; align-items:center; gap:15px; cursor:pointer; }
        .avatar { width:45px; height:45px; border-radius:50%; border:2px solid var(--neon); object-fit:cover; }
        
        /* TOPOLOGY */
        .topo-box { width:100%; height:700px; background:#000; border:1px solid var(--border); border-radius:12px; position:relative; overflow:hidden; background-image:radial-gradient(#222 1px, transparent 1px); background-size:40px 40px; }
        .node { position:absolute; width:80px; height:80px; background:#111; border:1px solid #444; border-radius:8px; display:flex; flex-direction:column; align-items:center; justify-content:center; color:#fff; z-index:10; cursor:pointer; transition:0.3s; }
        .node:hover { border-color:var(--neon); box-shadow:0 0 30px rgba(0,255,136,0.2); transform:scale(1.1); color:var(--neon); }
        .line { position:absolute; background:#333; height:2px; transform-origin:left center; z-index:1; }
        .pkt { position:absolute; width:6px; height:6px; background:var(--neon); border-radius:50%; z-index:2; box-shadow:0 0 10px var(--neon); animation:flow 2s infinite linear; }
        @keyframes flow { 0%{left:0;opacity:0} 10%{opacity:1} 90%{opacity:1} 100%{left:100%;opacity:0} }

        /* SSH TERMINAL */
        .terminal { background:#000; border:1px solid #333; padding:25px; font-family:'JetBrains Mono', monospace; color:#0f0; height:100%; border-radius:8px; display:flex; flex-direction:column; }
        #term-out { flex:1; overflow-y:auto; margin-bottom:10px; white-space:pre-wrap; line-height:1.5; }
        #term-in { background:transparent; border:none; color:#fff; width:100%; font-family:inherit; font-size:1rem; }

        /* CODEX (BOOK) */
        .codex-layout { display:grid; grid-template-columns:250px 1fr; gap:30px; height:600px; }
        .codex-idx div { padding:12px; cursor:pointer; color:#888; border-radius:4px; margin-bottom:5px; font-family:'JetBrains Mono'; font-size:0.9rem; }
        .codex-idx div:hover, .codex-idx div.active { background:#1a1a1a; color:var(--neon); }
        .codex-page { background:#111; padding:30px; border-radius:8px; border:1px solid var(--border); overflow-y:auto; }
        .code-box { background:#050505; padding:20px; border-radius:6px; color:#a5d6ff; font-family:'JetBrains Mono'; margin-top:15px; border-left:3px solid var(--neon); font-size:0.9rem; white-space:pre-wrap; }

        /* PROFILE */
        .card { background:#151515; border:1px solid var(--border); padding:30px; border-radius:12px; max-width:800px; }
        .form-row { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:20px; }
        .input-box { width:100%; padding:12px; background:#0a0a0a; border:1px solid #333; color:#fff; border-radius:4px; margin-top:5px; }
        .btn-save { background:var(--neon); border:none; padding:10px 25px; border-radius:4px; font-weight:bold; cursor:pointer; margin-top:20px; float:right; }

        /* LOGIN GATEWAY */
        #login-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.98); z-index:5000; display:flex; align-items:center; justify-content:center; }
        .login-card { width:400px; padding:50px; background:#111; border:1px solid var(--border); border-radius:16px; text-align:center; }
        .login-inp { width:100%; padding:15px; background:#000; border:1px solid #333; color:#fff; margin-bottom:15px; border-radius:6px; }
        .btn-ent { width:100%; padding:15px; background:var(--neon); border:none; font-weight:bold; cursor:pointer; border-radius:6px; }
    </style>
</head>
<body>

    <div id="login-modal">
        <div class="login-card">
            <h2 style="font-family:'Orbitron'; color:#fff; margin-bottom:30px;">KNS ACTIVO</h2>
            <input type="text" id="u" class="login-inp" placeholder="kaleb.nunes">
            <input type="password" id="p" class="login-inp" placeholder="Senha">
            <button onclick="login()" class="btn-ent">ENTRAR NO SISTEMA</button>
            <p id="err" style="color:#f33; margin-top:15px; display:none; font-size:0.8rem;">ACESSO NEGADO</p>
        </div>
    </div>

    <div id="app" class="hidden" style="display:flex; width:100%;">
        <div class="sidebar">
            <div class="logo">KNS COMMAND</div>
            <button class="btn-menu active" onclick="nav('dash')"><i class="fa-solid fa-chart-pie"></i> DASHBOARD</button>
            <button class="btn-menu" onclick="nav('topo')"><i class="fa-solid fa-network-wired"></i> TOPOLOGIA</button>
            <button class="btn-menu" onclick="nav('term')"><i class="fa-solid fa-terminal"></i> SSH SECURE</button>
            <button class="btn-menu" onclick="nav('book')"><i class="fa-solid fa-book"></i> KNS CODEX</button>
            <div style="margin-top:auto">
                <button class="btn-menu" onclick="location.href='index.html'" style="color:#f33"><i class="fa-solid fa-power-off"></i> SAIR</button>
            </div>
        </div>

        <div class="main">
            <div class="header">
                <div><h2 style="font-family:'Orbitron'">PAINEL DE CONTROLE</h2><span style="color:var(--neon); font-size:0.8rem;">● SISTEMA ONLINE</span></div>
                <div class="profile" onclick="nav('prof')">
                    <div style="text-align:right"><div style="font-weight:bold">KALEB NUNES</div><div style="font-size:0.7rem; color:#888">ADMINISTRADOR</div></div>
                    <img src="./assets/foto.jpg" class="avatar" onerror="this.src='https://via.placeholder.com/50'">
                </div>
            </div>

            <div id="view-dash">
                <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:20px;">
                    <div class="card" style="text-align:center;"><span class="mono" style="color:#888">STATUS</span><div style="font-size:2.5rem; color:var(--neon); font-family:'Orbitron'; margin:10px 0;">100%</div></div>
                    <div class="card" style="text-align:center;"><span class="mono" style="color:#888">LATÊNCIA</span><div style="font-size:2.5rem; color:#fff; font-family:'Orbitron'; margin:10px 0;">4ms</div></div>
                    <div class="card" style="text-align:center;"><span class="mono" style="color:#888">CLIENTES</span><div style="font-size:2.5rem; color:#888; font-family:'Orbitron'; margin:10px 0;">12</div></div>
                </div>
            </div>

            <div id="view-topo" class="hidden">
                <div class="topo-box">
                    <div class="node" style="top:10%; left:5%; border-color:#0cf"><i class="fa-solid fa-cloud"></i><span style="font-size:0.6rem; margin-top:5px;">CDN</span></div>
                    <div class="node" style="top:10%; left:25%;"><i class="fa-solid fa-network-wired"></i><span style="font-size:0.6rem; margin-top:5px;">PTT</span></div>
                    <div class="node" style="top:10%; left:45%;"><i class="fa-solid fa-building"></i><span style="font-size:0.6rem; margin-top:5px;">ISP</span></div>
                    <div class="node" style="top:45%; left:45%; border-color:var(--neon)"><i class="fa-solid fa-server"></i><span style="font-size:0.6rem; margin-top:5px;">CORE</span></div>
                    <div class="node" style="top:45%; left:25%;"><i class="fa-solid fa-sitemap"></i><span style="font-size:0.6rem; margin-top:5px;">SWT</span></div>
                    <div class="node" style="top:80%; left:25%;"><i class="fa-solid fa-broadcast-tower"></i><span style="font-size:0.6rem; margin-top:5px;">OLT</span></div>
                    <div class="node" style="top:80%; left:5%; border-color:#fc0"><i class="fa-solid fa-house-signal"></i><span style="font-size:0.6rem; margin-top:5px;">ONU</span></div>
                    
                    <div class="line" style="top:13%; left:9%; width:18%;"><div class="packet"></div></div>
                    <div class="line" style="top:13%; left:29%; width:18%;"><div class="packet" style="animation-delay:0.5s;"></div></div>
                    <div class="line" style="top:17%; left:48%; width:2px; height:28%;"><div class="packet" style="animation:flow 2s infinite linear 1s;"></div></div>
                    <div class="line" style="top:50%; left:29%; width:18%;"><div class="packet" style="animation-direction:reverse;"></div></div>
                    <div class="line" style="top:53%; left:28%; width:2px; height:27%;"><div class="packet" style="animation:flow 2s infinite linear 1.5s;"></div></div>
                    <div class="line" style="top:83%; left:9%; width:18%;"><div class="packet" style="animation-direction:reverse 2s;"></div></div>
                </div>
            </div>

            <div id="view-term" class="hidden" style="height:100%">
                <div class="terminal" onclick="document.getElementById('term-in').focus()">
                    <div id="term-out"></div>
                    <div style="display:flex;"><span id="prompt" style="color:var(--neon); margin-right:10px;"></span><input id="term-in" type="text" autocomplete="off"></div>
                </div>
            </div>

            <div id="view-book" class="hidden">
                <div class="codex-layout">
                    <div class="codex-idx">
                        <div onclick="loadPage('huawei')" class="active">HUAWEI VRP</div>
                        <div onclick="loadPage('olt')">OLT PROVISION</div>
                        <div onclick="loadPage('bgp')">BGP ROUTING</div>
                    </div>
                    <div class="codex-page" id="book-content"></div>
                </div>
            </div>

            <div id="view-prof" class="hidden">
                <h3 style="font-family:'Orbitron'; margin-bottom:20px;">MEU CADASTRO</h3>
                <div class="card">
                    <div style="display:flex; align-items:center; gap:20px; margin-bottom:20px;">
                        <img src="./assets/foto.jpg" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px solid #333;" onerror="this.src='https://via.placeholder.com/80'">
                        <button style="background:#222; border:1px solid #444; color:#fff; padding:5px 10px; cursor:pointer;">Alterar Foto</button>
                    </div>
                    <div class="form-row">
                        <div><label>Nome</label><input type="text" class="input-box" value="Kaleb Nunes"></div>
                        <div><label>E-mail</label><input type="text" class="input-box" value="comercial@knsconsultoria.com.br"></div>
                        <div><label>Usuário</label><input type="text" class="input-box" value="kaleb.nunes" disabled style="opacity:0.6;"></div>
                        <div><label>Telefone</label><input type="text" class="input-box" value="+55 47 98890-1616"></div>
                    </div>
                    <button class="btn-save" onclick="alert('Salvo!')">SALVAR DADOS</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // LOGIN
        document.getElementById('p').addEventListener('keypress', e => { if(e.key==='Enter') login() });
        function login() {
            const u = document.getElementById('u').value;
            const p = document.getElementById('p').value;
            if(u === 'kaleb.nunes' && p === '13091993') {
                document.getElementById('login-modal').style.display = 'none';
                document.getElementById('app').classList.remove('hidden');
            } else { document.getElementById('err').style.display = 'block'; }
        }

        // NAV
        function nav(id) {
            ['dash','topo','term','book','prof'].forEach(v => document.getElementById('view-'+v).classList.add('hidden'));
            document.getElementById('view-'+id).classList.remove('hidden');
            if(id === 'term') initSSH();
            if(id === 'book') loadPage('huawei');
        }

        // CODEX
        function loadPage(page) {
            const c = document.getElementById('book-content');
            if(page === 'huawei') c.innerHTML = `<h3>Comandos Huawei</h3><p style="color:#888; margin:10px 0;">Verificação de interfaces e potência.</p><div class="code-box">display interface brief\ndisplay transceiver diagnosis\ndisplay current-configuration</div>`;
            if(page === 'olt') c.innerHTML = `<h3>OLT Provisioning</h3><p style="color:#888; margin:10px 0;">Configuração de ONUs.</p><div class="code-box">display ont autofind all\ndisplay ont info summary\nont add [port] [id] sn-auth</div>`;
            if(page === 'bgp') c.innerHTML = `<h3>BGP Routing</h3><p style="color:#888; margin:10px 0;">Análise de peers.</p><div class="code-box">display bgp peer\ndisplay bgp routing-table\nshow ip route</div>`;
        }

        // SSH SMART
        let sshStep = 0; 
        const termOut = document.getElementById('term-out');
        const termIn = document.getElementById('term-in');
        const prompt = document.getElementById('prompt');

        function initSSH() {
            termOut.innerHTML = '<div>KNS SECURE SHELL [v9.5]</div><br>';
            if(localStorage.getItem('ssh_auth')) {
                sshStep = 3;
                prompt.innerText = 'root@kns-core:~#';
                termOut.innerHTML += '<div>Auto-login: Success.</div>';
                termIn.type = 'text';
            } else {
                sshStep = 1;
                prompt.innerText = 'login as:';
                termIn.type = 'text';
            }
            termIn.value = ''; termIn.focus();
        }

        termIn.addEventListener('keydown', e => {
            if(e.key === 'Enter') {
                const v = termIn.value;
                termIn.value = '';
                if(sshStep === 1) {
                    termOut.innerHTML += `<div>login as: ${v}</div>`;
                    if(v === 'kalebnunes') { sshStep = 2; prompt.innerText = "password:"; termIn.type = 'password'; }
                    else termOut.innerHTML += '<div style="color:#f33">Access denied</div>';
                } else if(sshStep === 2) {
                    if(v === '13091993') { 
                        sshStep = 3; 
                        localStorage.setItem('ssh_auth', true);
                        prompt.innerText = "root@kns-core:~#"; 
                        termIn.type = 'text';
                        termOut.innerHTML += '<br><div>Welcome. Type "help".</div>';
                    } else {
                        termOut.innerHTML += '<div style="color:#f33">Access denied</div>';
                        sshStep = 1; prompt.innerText = "login as:"; termIn.type = 'text';
                    }
                } else if(sshStep === 3) {
                    termOut.innerHTML += `<div><span style="color:#0f8">root@kns-core:~#</span> ${v}</div>`;
                    if(v === 'help') termOut.innerHTML += '<div>Commands: ping, display bgp peer, status, clear</div>';
                    else if(v === 'clear') termOut.innerHTML = '';
                    else if(v.includes('ping')) { termOut.innerHTML += '<div>PING 8.8.8.8: 56 data bytes...<br>64 bytes: time=4ms</div>'; }
                    else termOut.innerHTML += '<div>Command not found</div>';
                }
                document.querySelector('.terminal').scrollTop = 10000;
            }
        });
    </script>
</body>
</html>