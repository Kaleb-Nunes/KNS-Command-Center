<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<title>KNS | NEXT-GEN SOC</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root { --bg-main: #020b12; --card-bg: rgba(6, 18, 26, 0.8); --neon-cyan: #00f3ff; --neon-red: #ff0055; --neon-green: #0aff00; --text-main: #fff; }
body { margin: 0; padding: 20px; background-color: var(--bg-main); color: var(--text-main); font-family: 'Rajdhani', sans-serif; height: 100vh; overflow: hidden; background-image: linear-gradient(rgba(0, 243, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 243, 255, 0.05) 1px, transparent 1px); background-size: 50px 50px; }
.cyber-grid { display: grid; grid-template-columns: 320px 1fr; grid-template-rows: 60px 1fr 100px; gap: 15px; height: calc(100vh - 40px); }
.header { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon-cyan); padding: 0 15px;}
.logo { font-family: 'Orbitron'; font-size: 22px; font-weight: 900; }
.logo span { color: var(--neon-cyan); }
.lang-flags img { width: 22px; cursor: pointer; opacity: 0.5; margin-left: 10px; border: 1px solid transparent; }
.lang-flags img.active { opacity: 1; border-color: var(--neon-cyan); box-shadow: 0 0 10px var(--neon-cyan); }
.cyber-card { background: var(--card-bg); border: 1px solid rgba(0,243,255,0.2); padding: 15px; backdrop-filter: blur(10px); }
.metric-title { font-size: 11px; color: var(--neon-cyan); text-transform: uppercase; font-weight: 700; }
.metric-big { font-family: 'Orbitron'; font-size: 28px; }
.btn-mitigate { display: none; width: 100%; margin-top: 10px; background: transparent; border: 1px solid var(--neon-red); color: var(--neon-red); padding: 10px; cursor: pointer; font-weight: bold; }
#timer-display { display: none; font-family: 'Share Tech Mono'; font-size: 32px; color: var(--neon-red); text-align: center; }
.footer { grid-column: 1 / -1; border-top: 1px solid var(--neon-cyan); font-family: 'Share Tech Mono'; padding: 10px; color: var(--neon-cyan); }
</style>
</head>
<body class="dark-theme">
<div class="cyber-grid">
    <div class="header">
        <div class="logo">KNS <span>// COMMAND_NODE</span></div>
        <div style="display:flex; gap:20px; align-items:center;">
            <div id="lbl-sim" style="cursor:pointer; color:var(--neon-red); font-weight:900" onclick="triggerChaos()">[ SIMULAR INVASÃO ]</div>
            <div class="lang-flags">
                <img src="https://flagcdn.com/w40/br.png" id="flag-pt" class="active" onclick="setLang('pt')">
                <img src="https://flagcdn.com/w40/us.png" id="flag-en" onclick="setLang('en')">
            </div>
        </div>
    </div>
    <div class="sidebar">
        <div class="cyber-card"><span class="metric-title" id="t-net">CARGA DE REDE</span><br><span class="metric-big">1.42 Tbps</span></div>
        <div class="cyber-card">
            <span class="metric-title" id="t-threat">AMEAÇA ATUAL</span>
            <div style="text-align:center; padding:10px; border:1px solid var(--neon-green); margin:10px 0;">
                <div id="sec-status" style="color:var(--neon-green); font-weight:800; font-family:Orbitron;">SEGURO</div>
            </div>
            <button onclick="startMitigation()" class="btn-mitigate" id="btn-mitigate">ACIONALIZAR MITIGAÇÃO DE INCIDENTES</button>
            <div id="timer-display">10</div>
        </div>
    </div>
    <div class="main-stage" style="grid-column: 2/3; display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
        <div class="cyber-card" style="grid-column: span 2;"><iframe src="http://localhost:3000/d-solo/adlvx49/kns-monitor?orgId=1&refresh=2s&panelId=4&theme=dark" width="100%" height="100%" frameborder="0"></iframe></div>
        <div class="cyber-card"><iframe src="http://localhost:3000/d-solo/adlvx49/kns-monitor?orgId=1&refresh=2s&panelId=2&theme=dark" width="100%" height="100%" frameborder="0"></iframe></div>
        <div class="cyber-card"><iframe src="http://localhost:3000/d-solo/adlvx49/kns-monitor?orgId=1&refresh=2s&panelId=1&theme=dark" width="100%" height="100%" frameborder="0"></iframe></div>
    </div>
    <div class="footer" id="terminal-log">> [SYSTEM] MONITORING ACTIVE...</div>
</div>
<script>
    let curLang = 'pt';
    const texts = {
        pt: { secure: 'SEGURO', breach: 'INVASÃO CRÍTICA', btn: 'ACIONALIZAR MITIGAÇÃO DE INCIDENTES', net: 'CARGA DE REDE', threat: 'AMEAÇA ATUAL', sim: '[ SIMULAR INVASÃO ]' },
        en: { secure: 'SECURE', breach: 'CRITICAL BREACH', btn: 'ACTIVATE INCIDENT MITIGATION', net: 'NETWORK LOAD', threat: 'CURRENT THREAT', sim: '[ SIMULATE BREACH ]' }
    };
    function setLang(lang) {
        curLang = lang;
        document.getElementById('flag-pt').classList.toggle('active', lang === 'pt');
        document.getElementById('flag-en').classList.toggle('active', lang === 'en');
        document.getElementById('t-net').innerText = texts[lang].net;
        document.getElementById('t-threat').innerText = texts[lang].threat;
        document.getElementById('btn-mitigate').innerText = texts[lang].btn;
        document.getElementById('lbl-sim').innerText = texts[lang].sim;
        document.getElementById('sec-status').innerText = document.body.classList.contains('alert-mode') ? texts[lang].breach : texts[lang].secure;
    }
    function triggerChaos() {
        document.body.classList.add('alert-mode');
        document.getElementById('sec-status').innerText = texts[curLang].breach;
        document.getElementById('btn-mitigate').style.display = 'block';
    }
    async function startMitigation() {
        document.getElementById('btn-mitigate').style.display = 'none';
        let t = document.getElementById('timer-display'); t.style.display = 'block';
        let count = 10;
        let int = setInterval(() => {
            count--; t.innerText = count;
            if(count <= 0) { clearInterval(int); t.style.display='none'; finish(); }
        }, 1000);
    }
    async function finish() {
        await fetch('http://localhost:5001/api/mitigate', {method:'POST'});
        document.body.classList.remove('alert-mode');
        document.getElementById('sec-status').innerText = texts[curLang].secure;
    }
</script>
</body>
</html>
